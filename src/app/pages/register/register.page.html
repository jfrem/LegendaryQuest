<ion-content>
  <div class="img-login">
    <form
      [formGroup]="registerForm"
      (ngSubmit)="onRegister()"
      aria-label="Formulario de Registro"
    >
      <div class="ion-text-center">
        <h1>Registro</h1>
      </div>

      <ion-item>
        <ion-icon name="person-outline" slot="start"></ion-icon>
        <ion-label position="floating">Nombre de Usuario</ion-label>
        <ion-input
          type="text"
          formControlName="username"
          required
          minlength="3"
          autocomplete="username"
          aria-required="true"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-icon name="mail-outline" slot="start"></ion-icon>
        <ion-label position="floating">Correo Electrónico</ion-label>
        <ion-input
          type="email"
          formControlName="email"
          required
          autocomplete="email"
          aria-required="true"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
        <ion-label position="floating">Contraseña</ion-label>
        <ion-input
          type="password"
          formControlName="password"
          required
          minlength="6"
          autocomplete="new-password"
          aria-required="true"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
        <ion-label position="floating">Confirmar Contraseña</ion-label>
        <ion-input
          type="password"
          formControlName="confirmPassword"
          required
          minlength="6"
          autocomplete="new-password"
          aria-required="true"
        ></ion-input>
      </ion-item>

      <div
        *ngIf="errorMessage"
        class="error-message"
        aria-live="assertive"
        role="alert"
      >
        <ion-icon name="alert-circle-outline"></ion-icon>
        {{ errorMessage }}
      </div>

      <ion-button expand="full" type="submit" [disabled]="loading || registerForm.invalid">
        <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>
        <span *ngIf="!loading">Registrar</span>
      </ion-button>

      <div class="ion-text-center">
        <ion-button
          fill="clear"
          routerLink="/login"
          aria-label="Iniciar sesión con una cuenta existente"
        >
          ¿Ya tienes una cuenta? Inicia Sesión
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>
